<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>System Kategoryzacji Filmów | Wyszukiwarka Filmów</title>
</head>

<body>
<div th:replace="~{header :: header}"></div>
<div class="px-4 py-5 my-5 text-center">
    <h1 class="display-5 fw-bold">Wyszukiwarka filmów</h1>
    <div class="col-lg-6 mx-auto">
        <p class="lead mb-4">Uzupełnij poniższe pola i wyszukaj filmu przez themoviedb.org API.</p>
        <p class="lead mb-4">Proszę drogi użytkowniku, pamiętaj, że wyszukiwarka jest w języku angielskim.</p>
    </div>
</div>

<div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>

<div>
    <form id="searchMovieForm" action="/search" method="get">
        <label>
            Wpisz nazwę filmu:
            <input type="text" name="query" required>
        </label>

        <button id="searchMovieButton">Szukaj filmu</button>
    </form>
</div>

<div>
    <h2>Wyniki wyszukiwania</h2>
    <form th:action="@{/search}" method="post">
        <table class="table" th:if="${movies != null}">
            <tr>
                <th scope="col">Tytuł</th>
                <th scope="col">Reżyser</th>
                <th scope="col">Data wydania</th>
                <th scope="col">Średnia ocen</th>
                <th scope="col">Czy dodać do moich filmów?</th>
            </tr>
            <tr th:each="movie : ${movies}">
                <td th:text="${movie.title}"></td>
                <td th:text="${movie.director}!=null ? ${movie.director} : 'Brak danych'"></td>
                <td th:text="${movie.releaseDate}"></td>
                <td th:text="${movie.voteAverage}"></td>
                <td><input type="checkbox" name="movies" th:value="${movie.title}"/></td>
            </tr>
        </table>

        <button type="submit">Dodaj do moich filmów zaznaczone filmy</button>

    </form>


</div>
<script src="/script/script.js"></script>
</body>
</html>